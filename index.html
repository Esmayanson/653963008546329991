<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador Interactivo de Informes Sonográficos</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"> 
</head>
<body>

    <header class="report-header">
        <div class="header-content">
            <img src="titulo_reporte.png" alt="Logo Institucional" class="center-logo">
            
            <h1 class="hidden-on-print">GENERADOR INTERACTIVO DE INFORMES SONOGRÁFICOS</h1>
            <p class="hidden-on-print">Estudio Ecográfico Abdominal</p>
        </div>
    </header>

    <main class="container">
        <div class="config-column hidden-on-print">
            
            <section id="patient-data-form" class="module">
                <h2><i class="fas fa-user-circle"></i> Datos del Paciente</h2>
                <form id="patient-form">
                    <div class="form-group">
                        <label for="nombre">Nombre:</label>
                        <input type="text" id="nombre" name="nombre" oninput="updateReportContent()">
                    </div>
                    <div class="form-group">
                        <label for="edad">Edad:</label>
                        <input type="number" id="edad" name="edad" oninput="updateReportContent()">
                    </div>
                    <div class="form-group">
                        <label for="identificacion">Identificación/Expediente:</label>
                        <input type="text" id="identificacion" name="identificacion" oninput="updateReportContent()">
                    </div>
                    <div class="form-group">
                        <label for="medico-solicitante">Médico Solicitante:</label>
                        <input type="text" id="medico-solicitante" name="medico-solicitante" value="Dr/Dra. " oninput="updateReportContent()">
                    </div>
                    <div class="form-group">
                        <label for="fecha-estudio">Fecha del Estudio:</label>
                        <input type="date" id="fecha-estudio" name="fecha-estudio" onchange="updateReportContent()">
                    </div>
                </form>
            </section>
            
            <section id="physician-data-form" class="module">
                <h2><i class="fas fa-user-md"></i> Médico Informante</h2>
                <form id="physician-form">
                    <div class="form-group">
                        <label for="sonografista">Médico Sonografista:</label>
                        <select id="sonografista" name="sonografista" onchange="updatePhysicianDetails(); updateReportContent()">
                            <option value="" disabled selected>Seleccione Médico Sonografista</option>
                            <option value="Dr. Esmayanson de León">Dr. Esmayanson de León</option>
                            <option value="Dr. Ibrahim Pérez">Dr. Ibrahim Pérez</option>
                            <option value="Dr. Randy Báez">Dr. Randy Báez</option>
                            <option value="Dr. Julio Peralta">Dr. Julio Peralta</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="especialidad">Especialidad/Matrícula:</label>
                        <input type="text" id="especialidad" name="especialidad" value="[Seleccione Médico]" readonly style="color: #666; background-color: #f0f0f0;">
                    </div>
                    <div class="form-group">
                        <label for="codigo-profesional">Código Profesional:</label>
                        <input type="text" id="codigo-profesional" name="codigo-profesional" value="[C.P. XXXXXXX]" readonly style="color: #666; background-color: #f0f0f0;">
                    </div>
                </form>
            </section>
            
            <section id="organ-selection" class="module">
                <h2><i class="fas fa-microscope"></i> Hallazgos por Órgano</h2>
                <div class="organ-table-container">
                    <table class="organ-table" id="organ-table-body">
                        <thead>
                            <tr>
                                <th>Órgano</th>
                                <th>Hallazgo</th>
                                <th>Medida</th>
                            </tr>
                        </thead>
                        <tbody>
                            </tbody>
                    </table>
                </div>
            </section>

             <section id="report-controls" class="module">
                <h2><i class="fas fa-tools"></i> Controles Finales</h2>
                 <div class="form-group">
                    <label>Sugerencias Adicionales:</label>
                    <div>
                        <input type="checkbox" id="sugerencia-clinico" onchange="updateReportContent()">
                        <label for="sugerencia-clinico">Correlación Clínico-Laboratorial</label>
                    </div>
                    <div>
                        <input type="checkbox" id="sugerencia-complementario" onchange="updateReportContent()">
                        <label for="sugerencia-complementario">Estudio Complementario (Ej: TAC/RMN)</label>
                    </div>
                </div>
                <div class="action-buttons">
                    <button id="generate-report-btn" title="Actualiza el contenido del informe con los datos seleccionados."><i class="fas fa-sync-alt"></i> GENERAR Y ACTUALIZAR INFORME</button>
                    <button id="new-report-btn" title="Borra todos los datos y comienza un nuevo informe."><i class="fas fa-trash-alt"></i> NUEVO INFORME</button>
                </div>
            </section>

        </div>

        <div class="report-column">
            
            <div id="report-toolbar" class="report-toolbar hidden-on-print">
                <button class="tool-btn" data-command="bold" title="Negrita"><i class="fas fa-bold"></i></button>
                <button class="tool-btn" data-command="italic" title="Cursiva"><i class="fas fa-italic"></i></button>
                <button class="tool-btn" data-command="underline" title="Subrayar"><i class="fas fa-underline"></i></button>
                <span class="separator"></span>
                <button class="tool-btn" data-command="justifyLeft" title="Alinear a la izquierda"><i class="fas fa-align-left"></i></button>
                <button class="tool-btn" data-command="justifyCenter" title="Centrar"><i class="fas fa-align-center"></i></button>
                <button class="tool-btn" data-command="justifyRight" title="Alinear a la derecha"><i class="fas fa-align-right"></i></button>
                <span class="separator"></span>
                <label for="font-color" class="color-label" title="Color de fuente"><i class="fas fa-palette"></i> Color:</label>
                <input type="color" id="font-color" class="tool-select" data-command="foreColor" value="#333333">
                <span class="separator"></span>
                <button class="tool-btn" onclick="window.print()" title="Imprimir el informe"><i class="fas fa-print"></i> Imprimir</button>
            </div>
            
            <div class="report-content-wrapper module">
                
                <div id="report-patient-data-print">
                    </div>
                
                <section id="report-description">
                    <p class="report-heading">DESCRIPCIÓN SONOGRÁFICA</p>
                    <div id="report-output" contenteditable="true" class="wysiwyg-editor">
                        <div id="organ-descriptions">
                        </div>
                    </div>
                </section>

                <section id="report-conclusions-final">
                    <p class="report-heading">IMPRESIÓN DIAGNÓSTICA</p>
                    <textarea id="notes-box" rows="3" placeholder="Escriba aquí cualquier información extra que deba ir en la Impresión Diagnóstica." oninput="updateReportContent()"></textarea>
                    
                    <div id="diagnostic-impression-output" class="report-text-output">
                        </div>

                    <p class="report-heading">SUGERENCIAS</p>
                    <div id="suggestion-output" class="report-text-output">
                        </div>
                </section>

                <section id="report-signature">
                    <div id="signature-block-output">
                        </div>
                </section>

            </div>
        </div>
    </main>

    <script src="organ_templates.js"></script>
    <script src="script.js"></script>

</body>
</html>